#initialization
import pygame, random, keyboard

# variables
width = 500
height = 600
alienSize = 100
alienX = width / 2
alienY = height - (height / 4) - alienSize
changeX = 0
changeY = 0
gravity = 0

#colours
colourG = 143
colourB = 143
ground = (84, 109, 0)
sky = (164, 221, 237)
sky2 = (171, 146, 255)
white = (255, 255, 255)
black = (0, 0, 0)
pink = (240, 84, 85)
pink2 = (108, 0, 44)
purpatrate = (181, 126, 220)
green = (5, 172, 81)
rouge = (117, 0, 7)
blouge = (38, 73, 61)
yellow = (253, 210, 82)
bleen = (32, 161, 133)
spotify = (69, colourB, colourB)

#setting up classes
class Platforms(pygame.sprite.Sprite):
    def __init__(self, width, height):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.Surface([width, height])
        self.image = pygame.image.load("huuy.png").convert()
        self.image = pygame.transform.scale(self.image, (100, 30))
        self.rect = self.image.get_rect()

        self.left_boundary = 0
        self.right_boundary = 0
        self.top_boundary = 0
        self.bottom_boundary = 0
        self.changeX = 0
        self.changeY = 0

class Player(pygame.sprite.Sprite):
    def __init__(self, width, height):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.Surface([width, height])
        self.image = pygame.image.load("erin.png").convert()
        self.image = pygame.transform.scale(self.image, (100, 100))
        self.rect = self.image.get_rect()
        self.rect.x = alienX
        self.rect.y = alienY
        self.left_boundary = 0
        self.right_boundary = 0
        self.top_boundary = 0
        self.bottom_boundary = 0
        self.changeX = 0
        self.changeY = 0

    def update(self):
        """ Called each frame. """
        self.rect.x += self.changeX
        self.rect.y += self.changeY

        #checking for left and right boundaries
    def meh(self):
        self.changeX *= -1
    def stop(self):
        self.changeY = 0
        gravity = 0
    def left (self):
        self.changeX = -0.4
    def right(self):
        self.changeX = 0.4

    def stopX(self):
        self.changeX = 0


pygame.init()
pygame.font.init()

#setting up the game screen
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption("A Line")

#time and frames?
clock = pygame.time.Clock()
clock.tick(60)

#player screens
displayScreen = "menu"
gaming = True

#Setting up sprite groups
platforms = pygame.sprite.Group()
all = pygame.sprite.Group()
playa = Player(width, height)
all.add(playa)
for i in range (10):
    block = Platforms(width, height)
    block.rect.x = random.randrange(0, width)
    block.rect.y = random.randrange(1, height - (height / 4))
    block.left_boundary = 0
    block.top_boundary = 0
    block.right_boundary = 500
    block.bottom_boundary = 500
    platforms.add(block)
    all.add(block)

def menu():
#background
    pygame.display.flip()
    screen.fill(black)
    pygame.draw.ellipse(screen, pink, [width / 2 - 700 / 2, height - 500 / 2, 700, 500])

#title
    myfont = pygame.font.SysFont('Consolas', 30)
    title = myfont.render('Get Me Out of Here', False, white)
    screen.blit(title, (100, 250))
    myfont = pygame.font.SysFont('Consolas', 20)
    toPlay = myfont.render('Press [space] to play', False, pink2)
    toInstruct = myfont.render('Press [i] for instructions', False, pink2)
    screen.blit(toPlay, (125, height - 150))
    screen.blit(toInstruct, (100, height - 100))

def instruct():
#background
    pygame.display.flip()
    screen.fill(black)
#text
    myfont = pygame.font.SysFont('Consolas', 20)
    rightInstruct = myfont.render('Press [right] to move right', False, purpatrate)
    leftInstruct = myfont.render('Press [left] to move left', False, purpatrate)
    screen.blit(rightInstruct, (125, height - 150))
    screen.blit(leftInstruct, (100, height - 100))

def play(x, y, size):
   #the ground
    roseybrown = (colourG, colourG, colourG)
    screen.fill(roseybrown)
    pygame.draw.rect(screen, spotify, [0, height - (height / 4), width, height / 4])

   # character
    pygame.draw.ellipse(screen, blouge, [x, y, size, size])

    all.update()
    all.draw(screen)

def win():
# background
    screen.fill(sky)

def loss():
# background
    screen.fill(white)

while gaming:
    # checking for arrow keys (for going back to the menu screen and player movement)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            x = False
        elif event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                playa.left()
            elif event.key == pygame.K_RIGHT:
                playa.right()
        elif event.type == pygame.KEYUP:
            playa.stopX()

    #checking for left and right boundaries
    if alienX < 0 or alienX > (width - alienSize):
        playa.stop()

           # elif alienY > height - (height / 4) - alienSize:
            #    self.changeY = 0
             #   gravity = 0

    #for changing into different screens
    if displayScreen == "menu":
        menu()
        if keyboard.is_pressed('space'):
            displayScreen = "play"
        elif keyboard.is_pressed('i'):
            displayScreen = "instruct"
    elif displayScreen == "instruct":
        instruct()
        if keyboard.is_pressed('escape'):
            displayScreen = "menu"
    elif displayScreen == "play":
        play(alienX, alienY, alienSize)

        if keyboard.is_pressed('escape'):
            displayScreen = "menu"

        # for player movement
        alienX += changeX
        if keyboard.is_pressed('up'):
            changeY = 0.25
            gravity = 0.007
            if colourG < 255.90:
                colourG += 0.05
            if colourB > 0.10:
                colourB -= 0.05
        alienY -= changeY
        changeY -= gravity

    #flips the graphics onto the screen
    pygame.display.flip()
pygame.quit()
